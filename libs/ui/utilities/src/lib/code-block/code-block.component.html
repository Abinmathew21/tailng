<div [class]="containerClassFinal()">
  <div [class]="bodyClassFinal()">
    @if (showLineNumbers()) {
      <div [class]="gutterClassFinal()" aria-hidden="true">
        @for (n of lineNumbers(); track n) {
          <div>{{ n }}</div>
        }
      </div>
    }

    @if (showCopy()) {
      <div [class]="copyWrapperClassFinal()">
        <tng-copy-button
          [text]="code()"
          [variant]="copyVariant()"
          [size]="copySize()"
          [resetAfterMs]="copyResetMs()"
        >
          <!-- DEFAULT state -->
          @if (hasCustomCopy()) {
            <ng-content select="[tngCodeBlockCopy]"></ng-content>
          } @else {
            Copy
          }
    
          <!-- COPIED state -->
          <span tngCopied>
            @if (hasCustomCopied()) {
              <ng-content select="[tngCodeBlockCopied]"></ng-content>
            } @else {
              Copied
            }
          </span>
        </tng-copy-button>
      </div>
    }

    <pre [class]="preClassFinal()"><code [class]="codeClassFinal()" [innerHTML]="renderedHtml()"></code></pre>

    <span #projected class="hidden"><ng-content></ng-content></span>
  </div>
</div>