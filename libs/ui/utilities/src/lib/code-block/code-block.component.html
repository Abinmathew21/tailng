<div [class]="rootKlassFinal()">
  <div [class]="bodyKlassFinal()">
    @if (showLineNumbers()) {
      <div [class]="gutterKlassFinal()" aria-hidden="true">
        @for (n of lineNumbers(); track n) {
          <div>{{ n }}</div>
        }
      </div>
    }

    <!-- Copy area: projected content -->
    <span (click)="copyCode()" [class]="copyKlassFinal()">
      @if (copied()) {
        <ng-content select="[tngCopied]"></ng-content>
      } @else {
        <ng-content select="[tngCopy]"></ng-content>
      }
    </span>

    <!-- IMPORTANT: no extra indentation/newlines inside <pre> -->
    <pre [class]="preKlassFinal()"><code [class]="codeKlassFinal()" [innerHTML]="renderedHtml()"></code></pre>

    <span #projected class="hidden"><ng-content></ng-content></span>
  </div>
</div>