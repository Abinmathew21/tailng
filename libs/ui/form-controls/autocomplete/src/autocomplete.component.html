<div class="relative">
  <div
    [class.opacity-60]="isDisabled()"
    [class.pointer-events-none]="isDisabled()"
  >
    <input
      #inputEl
      type="text"
      class="w-full border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary"
      [value]="inputValue()"
      [placeholder]="placeholder()"
      [disabled]="isDisabled()"
      (input)="onInput($event)"
      (focus)="open('programmatic')"
      (blur)="onBlur()"
      (keydown)="onKeydown($event)"
      autocomplete="off"
      role="combobox"
      aria-autocomplete="list"
      [attr.aria-expanded]="isOpen()"
    />
  </div>

  <tng-connected-overlay
    [open]="isOpen()"
    [anchor]="inputEl"
    placement="bottom-start"
    width="anchor"
    (closed)="onOverlayClosed($event)"
  >
    <tng-overlay-panel>
      <tng-option-list
        [items]="options()"
        [activeIndex]="focusedIndex()"
        [displayWith]="displayWith()"
        (optionMouseDown)="select($event.item)"
        (optionHover)="focusedIndex.set($event)"
      />
    </tng-overlay-panel>
  </tng-connected-overlay>
</div>
