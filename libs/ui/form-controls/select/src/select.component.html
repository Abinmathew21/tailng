<div class="relative">
  <!-- Trigger -->
  <button
    #triggerEl
    type="button"
    class="
      w-full
      flex items-center justify-between
      border rounded-md
      px-3 py-2
      text-sm
      bg-white
      focus:outline-none
      focus:ring-2 focus:ring-primary
    "
    [class.opacity-60]="isDisabled()"
    [class.pointer-events-none]="isDisabled()"
    [disabled]="isDisabled()"
    (click)="onTriggerClick()"
    (keydown)="onKeydown($event)"
    (blur)="onBlur()"
    aria-haspopup="listbox"
    [attr.aria-expanded]="isOpen()"
  >
    <span class="truncate text-left">
      @if (currentValue()) {
        {{ display(currentValue()) }}
      } @else {
        <span class="text-gray-400">{{ placeholder() }}</span>
      }
    </span>

    <span class="ml-2 text-gray-500">â–¾</span>
  </button>

  <!-- Overlay -->
  <tng-connected-overlay
    [open]="isOpen()"
    [anchor]="triggerEl"
    placement="bottom-start"
    width="anchor"
    (closed)="onOverlayClosed($event)"
  >
    <tng-overlay-panel>
      <tng-option-list
        [items]="options()"
        [activeIndex]="activeIndex()"
        [displayWith]="displayWith()"
        (optionMouseDown)="select($event.item)"
        (optionHover)="activeIndex.set($event)"
      />
    </tng-overlay-panel>
  </tng-connected-overlay>
</div>
